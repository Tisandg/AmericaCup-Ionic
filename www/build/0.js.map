{"version":3,"sources":["../../src/pages/matches/matches.module.ts","../../src/pages/matches/matches.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { MatchesPage } from './matches';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MatchesPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(MatchesPage),\r\n  ],\r\n})\r\nexport class MatchesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/matches/matches.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { AppConstantsProvider } from '../../providers/app-constants/app-constants';\r\nimport { DatabaseProvider } from '../../providers/database/database';\r\nimport { Observable } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Match } from '../Match';\r\nimport { Team } from '../Team';\r\nimport { TeamDetail } from '../TeamDetail';\r\nimport { Storage } from '@ionic/storage';\r\n//import { GroupsPage } from '../groups/groups';\r\n\r\n/**\r\n * Generated class for the MatchesPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-matches',\r\n  templateUrl: 'matches.html',\r\n})\r\nexport class MatchesPage {\r\n\r\n  private appConstants: any;\r\n\r\n  private matches: Array<Match> = [];\r\n  private teamsId: Array<number> = [];\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams,\r\n    public http:HttpClient, appConstants:AppConstantsProvider, \r\n    private database: DatabaseProvider, private storage:Storage){\r\n    this.appConstants = appConstants;\r\n    this.getMatches(1);\r\n    this.getMatches(2);\r\n    this.getMatches(3);\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad MatchesPage');\r\n  }\r\n\r\n  getMatches(groupId: number){\r\n    var url = 'https://cors-anywhere.herokuapp.com/';\r\n    if(groupId == 1){ url = url+this.appConstants.getGroupA();  }\r\n    if(groupId == 2){ url = url+this.appConstants.getGroupB();  }\r\n    if(groupId == 3){ url = url+this.appConstants.getGroupC();  }\r\n    let data:Observable<any> = this.http.get(url);\r\n    data.subscribe(result => {\r\n      var idsTeam: Array<number> = [];\r\n      for (var item of result.data.match) {\r\n        let imageA = \"assets/imgs/Flags/\"+item.home_name.toLowerCase()+\".png\";\r\n        let imageB = \"assets/imgs/Flags/\"+item.away_name.toLowerCase()+\".png\";\r\n\r\n        //Guardando en almacenamiento local\r\n        let newMatch = new Match(item.id, item.home_id, item.away_id, item.home_name,\r\n          item.away_name,item.score, item.date, item.status, imageA, imageB);\r\n        this.matches.push(newMatch);\r\n        let infoMatch=\"\"+item.home_name+\",\"+item.away_name+\",\"+item.score+\"\"+item.date+\",\"\r\n        +item.status+\",\"+imageA+\"\"+imageB;\r\n        this.storage.set(\"match-\"+item.id,infoMatch);\r\n\r\n        //Agregar equipos\r\n        if(this.teamsId.indexOf(item.home_id) == -1){\r\n          //Agregarlo\r\n          this.teamsId.push(item.home_id);\r\n          let infoTeam=\"\"+item.home_name+\",\"+imageA;\r\n          this.storage.set(\"team-\"+item.home_id,infoTeam);\r\n        }\r\n        if(this.teamsId.indexOf(item.away_id) == -1){\r\n          //Agregarlo\r\n          let infoTeam=\"\"+item.away_name+\",\"+imageB;\r\n          this.storage.set(\"team-\"+item.away_id,infoTeam);\r\n        }\r\n\r\n        if(idsTeam.indexOf(item.away_id) == -1){\r\n          idsTeam.push(item.away_id);\r\n          console.log(\"Agregado: \"+item.away_id);\r\n        }\r\n        if(idsTeam.indexOf(item.home_id) == -1){\r\n          idsTeam.push(item.home_id);\r\n          console.log(\"Agregado: \"+item.home_id);\r\n        }\r\n      }\r\n\r\n      //Guardar info Group\r\n      var idsEquipo: string;\r\n      var primero:boolean = true;\r\n      console.log(\"Tama√±o: \"+idsTeam.length);\r\n      for(var idTeam of idsTeam){\r\n        if(primero){\r\n          idsEquipo = \"\"+idTeam;\r\n          primero = false;\r\n        }else{\r\n          idsEquipo = idsEquipo+\",\"+idTeam;\r\n        }\r\n      }\r\n      this.storage.set(\"group-\"+groupId,idsEquipo);\r\n\r\n      //After getting the teams, we'll calculate \r\n      //the points of each team (Position table)\r\n      for (var team of idsTeam) {\r\n        var won: number = 0;\r\n        var drawn: number = 0;\r\n        var lost: number = 0;\r\n        var points: number = 0;\r\n        var name:string = \"\";\r\n        var numMatches: number = 0;\r\n        for (var matchItem of this.matches) {\r\n          if(matchItem.idTeamA == team){\r\n            name = matchItem.nameTeamA;\r\n            numMatches++;\r\n            let dividido: string[] = matchItem.score.split(\" - \");\r\n            let goalsA = parseInt(dividido[0]);\r\n            let goalsB = parseInt(dividido[1]);\r\n            if(goalsA > goalsB){  won++;  }\r\n            if(goalsA == goalsB){  drawn++;  }\r\n            if(goalsA < goalsB){  lost++;  }\r\n          }\r\n          if(matchItem.idTeamB == team){\r\n            numMatches++;\r\n            let dividido: string[] = matchItem.score.split(\" - \");\r\n            let goalsA = parseInt(dividido[0]);\r\n            let goalsB = parseInt(dividido[1]);\r\n            if(goalsA > goalsB){  lost++;  }\r\n            if(goalsA == goalsB){  drawn++;  }\r\n            if(goalsA < goalsB){  won++;  }\r\n          }\r\n        }\r\n        points = (won*3)+(drawn*1);\r\n        let image = \"assets/imgs/Flags/\"+name.toLowerCase()+\".png\";\r\n        let infoDetail = \"\"+name+\",\"+image+\",\"+numMatches+\",\"+won+\",\"+drawn\r\n                        +\",\"+lost+\",\"+points;\r\n        this.storage.set(\"detail-\"+team,infoDetail);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/matches/matches.ts"],"sourceRoot":""}